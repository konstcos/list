var P=Object.defineProperty;var D=(e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var h=(e,t,n)=>D(e,typeof t!="symbol"?t+"":t,n);import{B,A as O,d as j,c as a,o as r,n as x,l as c,k as R,m as f,p as I,a as i,t as L,x as b,_ as C,j as l,w as _,y as $,u as M,F as N,z as A,h as q}from"./index-BobiO0F-.js";import{a as F}from"./index-DEcRA8vA.js";import{s as H}from"./index-D3HAaC87.js";import{s as W}from"./index-Dra7jdLS.js";var G=({dt:e})=>`
.p-tag {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: ${e("tag.primary.background")};
    color: ${e("tag.primary.color")};
    font-size: ${e("tag.font.size")};
    font-weight: ${e("tag.font.weight")};
    padding: ${e("tag.padding")};
    border-radius: ${e("tag.border.radius")};
    gap: ${e("tag.gap")};
}

.p-tag-icon {
    font-size: ${e("tag.icon.size")};
    width: ${e("tag.icon.size")};
    height:${e("tag.icon.size")};
}

.p-tag-rounded {
    border-radius: ${e("tag.rounded.border.radius")};
}

.p-tag-success {
    background: ${e("tag.success.background")};
    color: ${e("tag.success.color")};
}

.p-tag-info {
    background: ${e("tag.info.background")};
    color: ${e("tag.info.color")};
}

.p-tag-warn {
    background: ${e("tag.warn.background")};
    color: ${e("tag.warn.color")};
}

.p-tag-danger {
    background: ${e("tag.danger.background")};
    color: ${e("tag.danger.color")};
}

.p-tag-secondary {
    background: ${e("tag.secondary.background")};
    color: ${e("tag.secondary.color")};
}

.p-tag-contrast {
    background: ${e("tag.contrast.background")};
    color: ${e("tag.contrast.color")};
}
`,K={root:function(t){var n=t.props;return["p-tag p-component",{"p-tag-info":n.severity==="info","p-tag-success":n.severity==="success","p-tag-warn":n.severity==="warn","p-tag-danger":n.severity==="danger","p-tag-secondary":n.severity==="secondary","p-tag-contrast":n.severity==="contrast","p-tag-rounded":n.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},J=B.extend({name:"tag",style:G,classes:K}),Q={name:"BaseTag",extends:O,props:{value:null,severity:null,rounded:Boolean,icon:String},style:J,provide:function(){return{$pcTag:this,$parentInstance:this}}};function g(e){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(e)}function X(e,t,n){return(t=Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){var t=Z(e,"string");return g(t)=="symbol"?t:t+""}function Z(e,t){if(g(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var p=n.call(e,t);if(g(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E={name:"Tag",extends:Q,inheritAttrs:!1,computed:{dataP:function(){return j(X({rounded:this.rounded},this.severity,this.severity))}}},ee=["data-p"];function te(e,t,n,p,s,d){return r(),a("span",f({class:e.cx("root"),"data-p":d.dataP},e.ptmi("root")),[e.$slots.icon?(r(),x(I(e.$slots.icon),f({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(r(),a("span",f({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):c("",!0),e.value!=null||e.$slots.default?R(e.$slots,"default",{key:2},function(){return[i("span",f({class:e.cx("label")},e.ptm("label")),L(e.value),17)]}):c("",!0)],16,ee)}E.render=te;const w={async getUseLinks(){return(await b.post("links/user-links",{})).data},async saveLink(e){return(await b.post("links/save-link",{id:e.id,link:e.link})).data},async deleteLink(e){return(await b.post("links/delete-link",{link_id:e.id})).data}};class m{constructor(t={}){h(this,"id",0);h(this,"link","");this.id=t.id??0,this.link=t.link??""}clear(){this.link=""}}class U{async getUserLinks(){try{return await w.getUseLinks()}catch{return!1}}async saveLink(t){try{return await w.saveLink(t)}catch{return!1}}async deleteLink(t){try{return await w.deleteLink(t)}catch{return!1}}}class T{constructor(){this.linksRepository=new U}async getUserLinks(){try{const t=await this.linksRepository.getUserLinks();if(t.status==="success"){let n=[];for(let p of t.data.links)n.push(new m({id:p.id,link:p.link}));return n}return[]}catch{return!1}}async saveLink(t){try{return await this.linksRepository.saveLink(t)}catch{return!1}}async deleteLink(t){try{return await this.linksRepository.deleteLink(t)}catch{return!1}}}const ne={name:"LinkEditor",setup(){const e=new U,t=new T;return{linkRepository:e,linkUseCase:t}},props:{modelValue:{type:Boolean,default:!1},link:{type:Object,required:!0}},data(){return{modalOpen:this.value,linkEditor:{id:0,link:""},loading:!1}},watch:{modelValue(e){e?this.openModal():this.closeModal()},modalOpen(e){e&&(this.linkEditor.id=this.link.id,this.linkEditor.link=this.link.link)}},methods:{openModal(){this.modalOpen=!0,this.clearLinkData()},closeModal(){this.modalOpen=!1,this.$emit("update:modelValue",!1)},async saveLink(){this.loading=!0,await this.linkRepository.saveLink(new m({id:this.linkEditor.id,link:this.linkEditor.link})),this.loading=!1,this.$emit("reload"),this.closeModal()},clearLinkData(){this.linkEditor={id:0,link:""}}}},se={key:0},ie={key:0,class:"w-full px-2"},le={class:"flex justify-end gap-2 mt-4"};function oe(e,t,n,p,s,d){const v=W,u=M,k=$;return r(),a("div",null,[l(k,{visible:s.modalOpen,"onUpdate:visible":t[1]||(t[1]=y=>s.modalOpen=y),modal:"",header:"Линк",style:{width:"25rem"},onHide:d.closeModal},{default:_(()=>[s.modalOpen?(r(),a("div",se,[s.linkEditor?(r(),a("div",ie,[l(v,{modelValue:s.linkEditor.link,"onUpdate:modelValue":t[0]||(t[0]=y=>s.linkEditor.link=y),rows:"3",required:"",placeholder:"Link",fluid:""},null,8,["modelValue"])])):c("",!0)])):c("",!0),i("div",le,[l(u,{type:"button",label:"Закрыть",size:"small",severity:"secondary",onClick:d.closeModal},null,8,["onClick"]),l(u,{type:"button",label:"Сохранить",size:"small",severity:"success",onClick:d.saveLink},null,8,["onClick"])])]),_:1},8,["visible","onHide"])])}const re=C(ne,[["render",oe],["__scopeId","data-v-7a4ffad8"]]),ae={name:"Links",components:{LinkEditor:re},setup(){return{linksUseCase:new T}},data(){return{links:[],loading:!1,errorType:null,newLink:null,linkEditorModal:{show:!1,link:{}},deleteLinkModal:{show:!1,link:null}}},methods:{clearNewLink(){this.newLink=null,this.errorType=null},async saveLink(){if(this.newLink&&this.newLink.trim().length===0)return!1;this.errorType=null,this.loading=!0;const e=await this.linksUseCase.saveLink(new m({id:0,link:this.newLink}));if(this.loading=!1,e.status==="fail")return e.info==="wrong_url_format"?this.errorType="wrong_url_format":e.info==="link_already_exists"?this.errorType="link_already_exists":this.errorType="unknown_error",!1;this.newLink=null,this.loadLinks()},openLinkEditor(e=null){this.linkEditorModal.link=e||new m,this.linkEditorModal.show=!0},async loadLinks(){this.loading=!0,this.links=await this.linksUseCase.getUserLinks(),this.loading=!1},openDeleteLinkModal(e){this.deleteLinkModal.link=e,this.deleteLinkModal.show=!0},async deleteLink(){if(this.deleteLinkModal&&!this.deleteLinkModal.link)return!1;await this.linksUseCase.deleteLink(this.deleteLinkModal.link),this.deleteLinkModal.show=!1,this.loadLinks()}},mounted(){this.loadLinks()}},de={class:"flex flex-1 overflow-hidden mt-4"},ce={class:"flex-1 ml-4 mr-4 overflow-y-auto"},ue={class:"mb-4"},ke={class:"flex flex-wrap -mx-2"},pe={class:"w-full md:w-2/3 px-2"},ye={class:"w-full md:w-1/3 px-2"},ge={key:0,class:"wrong-url-format mt-2 ml-1 mb-4"},fe={key:1,class:"wrong-url-format mt-2 ml-1 mb-4"},me={key:2,class:"wrong-url-format mt-2 ml-1 mb-4"},ve={key:0,class:"mb-4"},he={class:"flex flex-wrap mb-2"},be={class:"absolute top-2 right-2 flex space-x-0"},we={class:"absolute bottom-2 right-5 flex space-x-0"},xe={class:"link-id text-gray-900 dark:text-gray-600 text-xs"},Le=["href"],_e={class:"flex flex-wrap gap-2 mt-3"},Ce={key:1,class:"mb-4"},$e={class:"flex justify-end gap-2"};function Me(e,t,n,p,s,d){const v=H,u=M,k=E,y=F,V=q("LinkEditor"),S=$;return r(),a("div",null,[t[11]||(t[11]=i("h1",null,"Каталог ссылок",-1)),i("div",de,[t[8]||(t[8]=i("aside",{class:"w-64 overflow-y-auto"}," тут пока пусто потому что нет ни одной категории ",-1)),i("div",ce,[i("div",ue,[i("div",ke,[i("div",pe,[l(v,{modelValue:s.newLink,"onUpdate:modelValue":t[0]||(t[0]=o=>s.newLink=o),type:"text",required:"",placeholder:"link",fluid:""},null,8,["modelValue"])]),i("div",ye,[l(u,{label:"Сохранить",size:"small",loading:s.loading,onClick:t[1]||(t[1]=o=>d.saveLink())},null,8,["loading"]),l(u,{label:"Очистить",class:"ml-2",size:"small",severity:"secondary",onClick:t[2]||(t[2]=o=>d.clearNewLink())})])]),s.errorType==="wrong_url_format"?(r(),a("div",ge," не правильный формат линка ")):c("",!0),s.errorType==="unknown_error"?(r(),a("div",fe," не известная ошибка при сохранении, попробуйте позже ")):c("",!0),s.errorType==="link_already_exists"?(r(),a("div",me," Точно такой же линк уже существует в системе ")):c("",!0)]),s.loading?(r(),a("div",ve," Загрузка... ")):c("",!0),i("div",null,[(r(!0),a(N,null,A(s.links,o=>(r(),a("div",{key:o.id},[i("div",he,[l(y,{class:"w-full relative"},{content:_(()=>[i("div",be,[s.loading?c("",!0):(r(),x(u,{key:0,class:"!text-xs",onClick:z=>d.openLinkEditor(o),disabled:s.loading,icon:"pi pi-pencil",severity:"info",variant:"text",rounded:""},null,8,["onClick","disabled"])),s.loading?c("",!0):(r(),x(u,{key:1,class:"!text-xs",onClick:z=>d.openDeleteLinkModal(o),disabled:s.loading,icon:"pi pi-trash",severity:"danger",variant:"text",rounded:""},null,8,["onClick","disabled"]))]),i("div",we,[i("span",xe," # "+L(o.id),1)]),i("div",null,[t[7]||(t[7]=i("div",{class:"mb-2"},[i("div",{class:"flex text-gray-900 dark:text-gray-800 text-xs"},[i("div",{class:"bg-gray-900 dark:bg-gray-400 pl-2 pr-2 py-0 rounded-2xl cursor-pointer"}," Development / Python / FlaskAPI "),i("span",{class:"text-gray-900 dark:text-gray-200 text-xs mx-1"},"•"),i("div",{class:"bg-gray-900 dark:bg-gray-400 pl-2 pr-2 py-0 rounded-2xl cursor-pointer"}," AI / Stable Diffusion "),i("span",{class:"text-gray-900 dark:text-gray-200 text-xs mx-1"},"•"),i("div",{class:"bg-gray-900 dark:bg-gray-400 pl-2 pr-2 py-0 rounded-2xl cursor-pointer"}," Design / Gimp ")])],-1)),i("a",{class:"",href:o.link,target:"_blank"},L(o.link),9,Le),i("div",_e,[l(k,{value:"Primary",class:"!text-[10px]"}),l(k,{severity:"secondary",value:"Secondary",class:"!text-[10px]"}),l(k,{severity:"success",value:"Success",class:"!text-[10px]"}),l(k,{severity:"info",value:"Info",class:"!text-[10px]"}),l(k,{severity:"warn",value:"Warn",class:"!text-[10px]"}),l(k,{severity:"danger",value:"Danger",class:"!text-[10px]"}),l(k,{severity:"contrast",value:"Contrast",class:"!text-[10px]"})])])]),_:2},1024)])]))),128))]),!s.loading&&s.links.length===0?(r(),a("div",Ce," Ссылок пока нет ")):c("",!0)]),t[9]||(t[9]=i("aside",{class:"w-64 overflow-y-auto"}," Нет ни одного тега ",-1))]),l(V,{modelValue:s.linkEditorModal.show,"onUpdate:modelValue":t[3]||(t[3]=o=>s.linkEditorModal.show=o),link:s.linkEditorModal.link,onReload:t[4]||(t[4]=o=>d.loadLinks())},null,8,["modelValue","link"]),l(S,{visible:s.deleteLinkModal.show,"onUpdate:visible":t[6]||(t[6]=o=>s.deleteLinkModal.show=o),modal:"",header:"Удаление линка",style:{width:"25rem"}},{default:_(()=>[t[10]||(t[10]=i("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Уверены что хотите удалить линк?",-1)),i("div",$e,[l(u,{type:"button",label:"Отмена",size:"small",severity:"secondary",onClick:t[5]||(t[5]=o=>s.deleteLinkModal.show=!1)}),l(u,{type:"button",label:"Удалить",size:"small",severity:"danger",onClick:d.deleteLink},null,8,["onClick"])])]),_:1},8,["visible"])])}const ze=C(ae,[["render",Me],["__scopeId","data-v-54c14cfb"]]);export{ze as default};
