import{_ as w,u as v,r as n,o as m,c,a as u,b as l,d as o,w as t,L as V,t as y,e as k}from"./index-IywPlPZ1.js";const C={name:"LoginView",setup(){const{setToken:a,clearUser:i,user:p}=v(),f=new V;return{setToken:a,clearUser:i,user:p,loginRepository:f}},data(){return{section:"login",sections:{login:"login",registration:"registration"},error:!1,loading:!1,login:{email:"",password:""},registration:{name:"",email:"",password:"",passwordConfirmation:""}}},methods:{async loginUser(){this.clearError(),this.loading=!0,await this.loginRepository.login(this.login.email,this.login.password),this.loading=!1},async registerUser(){this.clearError(),this.checkRegistrationData()&&(this.loading=!0,await this.loginRepository.register(this.registration.name,this.registration.email,this.registration.password),this.loading=!1)},changeSection(a){this.clearError(),this.clearLoginData(),this.clearRegistrationData(),this.section=a},checkRegistrationData(){return this.registration.email===""?(this.error="Введите email",!1):this.registration.password===""?(this.error="Введите пароль",!1):this.registration.passwordConfirmation===""?(this.error="Введите подтверждение пароля",!1):this.registration.password!==this.registration.passwordConfirmation?(this.error="Пароли не совпадают",!1):!0},clearError(){this.error=!1},clearRegistrationData(){this.registration.name="",this.registration.email="",this.registration.password="",this.registration.passwordConfirmation=""},clearLoginData(){this.login.email="",this.login.password=""}}},U={class:"main_login_block"},x={key:0},R={class:"login_title"},D={key:1},E={class:"login_title"},q={key:0,class:"mb-4 error_block"};function L(a,i,p,f,e,d){const g=n("v-btn"),r=n("v-text-field"),_=n("v-form"),h=n("v-card-text"),b=n("v-card");return m(),c("div",U,[e.section===e.sections.login?(m(),c("div",x,[u("div",R,[l(" Вход "),o(g,{size:"small",onClick:i[0]||(i[0]=s=>d.changeSection(e.sections.registration)),disabled:e.loading},{default:t(()=>[l(" Зарегистрироваться ")]),_:1},8,["disabled"])]),u("div",null,[o(b,{color:"indigo",variant:"outlined"},{default:t(()=>[o(h,{class:"pt-6"},{default:t(()=>[o(_,null,{default:t(()=>[o(r,{modelValue:e.login.email,"onUpdate:modelValue":i[1]||(i[1]=s=>e.login.email=s),label:"Email",density:"compact",required:"",disabled:e.loading},null,8,["modelValue","disabled"]),o(r,{modelValue:e.login.password,"onUpdate:modelValue":i[2]||(i[2]=s=>e.login.password=s),label:"Пароль",type:"password",density:"compact",required:"",disabled:e.loading},null,8,["modelValue","disabled"]),o(g,{color:"primary",size:"small",onClick:d.loginUser,loading:e.loading},{default:t(()=>[l("Войти ")]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})])])):(m(),c("div",D,[u("div",E,[l(" Регистрация "),o(g,{size:"small",onClick:i[3]||(i[3]=s=>d.changeSection(e.sections.login)),disabled:e.loading},{default:t(()=>[l(" Войти ")]),_:1},8,["disabled"])]),u("div",null,[o(b,{color:"indigo",variant:"outlined"},{default:t(()=>[o(h,{class:"pt-6"},{default:t(()=>[o(_,null,{default:t(()=>[o(r,{modelValue:e.registration.name,"onUpdate:modelValue":i[4]||(i[4]=s=>e.registration.name=s),label:"Name",density:"compact",type:"text",required:"",disabled:e.loading},null,8,["modelValue","disabled"]),o(r,{modelValue:e.registration.email,"onUpdate:modelValue":i[5]||(i[5]=s=>e.registration.email=s),label:"Email",type:"email",density:"compact",required:"",disabled:e.loading},null,8,["modelValue","disabled"]),o(r,{modelValue:e.registration.password,"onUpdate:modelValue":i[6]||(i[6]=s=>e.registration.password=s),label:"Пароль",density:"compact",type:"password",required:"",disabled:e.loading},null,8,["modelValue","disabled"]),o(r,{modelValue:e.registration.passwordConfirmation,"onUpdate:modelValue":i[7]||(i[7]=s=>e.registration.passwordConfirmation=s),label:"Подтверждение пароля",density:"compact",type:"password",required:"",disabled:e.loading},null,8,["modelValue","disabled"]),e.error?(m(),c("div",q,y(e.error),1)):k("",!0),o(g,{color:"primary",size:"small",onClick:d.registerUser,loading:e.loading},{default:t(()=>[l("Зарегистрироваться ")]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})])]))])}const z=w(C,[["render",L],["__scopeId","data-v-0daed683"]]);export{z as default};
